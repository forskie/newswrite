 <!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Редактировать статью</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');
        body {
            font-family: 'Roboto', sans-serif;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-300 min-h-screen">
    <!-- Simple Header -->
    <header class="bg-gray-800 shadow-lg">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-white">Редактировать статью</h1>
            <a href="{{ url_for('home_page') }}" class="px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700">
                Назад
            </a>
        </div>
    </header>
    <!-- Main Content -->
    <main class="container mx-auto px-6 py-8 max-w-4xl">
        <!-- Flash Messages -->
        {% with messages = get_flashed_messages() %}
        {% if messages %}
        <div class="mb-6">
            {% for message in messages %}
            <div class="bg-green-600 bg-opacity-20 border border-green-500 text-green-300 px-4 py-3 rounded mb-4">
                {{ message }}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        {% endwith %}
        <!-- Article Form -->
        <div class="bg-gray-800 rounded-lg shadow-lg p-8">
            <form method="POST" action="{{ url_for('edit_article', id=article.id) }}" class="space-y-6">
                <!-- Title -->
                <div>
                    <label for="title" class="block text-sm font-medium text-gray-300 mb-2">
                        Заголовок статьи *
                    </label>
                    <input type="text"
                           id="title"
                           name="title"
                           required
                           value="{{ article.title }}"
                           class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
                           placeholder="Введите заголовок статьи">
                </div>
                <!-- Content -->
                <div>
                    <label for="content" class="block text-sm font-medium text-gray-300 mb-2">
                        Содержание статьи *
                    </label>
                    <textarea id="content"
                              name="content"
                              required
                              rows="12"
                              class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-y"
                              placeholder="Напишите вашу статью здесь...">{{ article.content }}</textarea>
                </div>
                <!-- Category -->
                <div>
                    <label for="category" class="block text-sm font-medium text-gray-300 mb-2">
                        Категория *
                    </label>
                    <select id="category"
                            name="category"
                            required
                            class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="">Выберите категорию</option>
                        <option value="news" {% if article.category == 'news' %}selected{% endif %}>Новости</option>
                        <option value="politics" {% if article.category == 'politics' %}selected{% endif %}>Политика</option>
                        <option value="business" {% if article.category == 'business' %}selected{% endif %}>Бизнес</option>
                        <option value="technology" {% if article.category == 'technology' %}selected{% endif %}>Технологии</option>
                        <option value="sports" {% if article.category == 'sports' %}selected{% endif %}>Спорт</option>
                        <option value="culture" {% if article.category == 'culture' %}selected{% endif %}>Культура</option>
                        <option value="science" {% if article.category == 'science' %}selected{% endif %}>Наука</option>
                        <option value="other" {% if article.category == 'other' %}selected{% endif %}>Другое</option>
                    </select>
                </div>
                <!-- Status -->
                <div>
                    <label for="status" class="block text-sm font-medium text-gray-300 mb-2">
                        Статус
                    </label>
                    <select id="status"
                            name="status"
                            class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="draft" {% if article.status == 'draft' %}selected{% endif %}>Черновик</option>
                        <option value="published" {% if article.status == 'published' %}selected{% endif %}>Опубликовать</option>
                    </select>
                </div>
                <!-- Tags (optional) -->
                <div>
                    <label for="tags" class="block text-sm font-medium text-gray-300 mb-2">
                        Теги (через запятую)
                    </label>
                    <input type="text"
                           id="tags"
                           name="tags"
                           value="{{ article.tags|join(', ') }}"
                           class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
                           placeholder="политика, экономика, новости">
                </div>
                <!-- Submit Button -->
                <div class="flex justify-end space-x-4">
                    <button type="submit"
                            name="action"
                            value="draft"
                            class="px-6 py-3 bg-gray-600 text-white font-medium rounded-lg hover:bg-gray-700 transition-colors">
                        Сохранить как черновик
                    </button>
                    <button type="submit"
                            name="action"
                            value="publish"
                            class="px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors">
                        Опубликовать статью
                    </button>
                </div>
            </form>
        </div>
        <!-- User Info (automatically shows logged user) -->
        <div class="mt-6 text-center text-gray-400 text-sm">
            {% if session.get('user_id') %}
            Автор: <span class="text-blue-400">{{ session.get('username', 'Пользователь') }}</span>
            {% endif %}
        </div>
    </main>
</body>
</html>